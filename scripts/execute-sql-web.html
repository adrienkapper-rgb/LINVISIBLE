<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ex√©cuter la requ√™te SQL - Ajouter colonne numero</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
        }
        .sql-box {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Monaco', 'Consolas', monospace;
            overflow-x: auto;
        }
        .button {
            background: #0066cc;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            margin: 10px 5px;
        }
        .button:hover {
            background: #0052a3;
        }
        .info {
            background: #e1f5fe;
            border-left: 4px solid #0288d1;
            padding: 15px;
            margin: 20px 0;
        }
        .success {
            background: #e8f5e8;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
        }
        .step {
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 20px;
            margin: 15px 0;
        }
        .step h3 {
            margin-top: 0;
            color: #0066cc;
        }
    </style>
</head>
<body>
    <h1>üéØ Ajouter la colonne "numero" √† la table products</h1>

    <div class="info">
        <strong>üìã Projet Supabase:</strong> rnxhkjvcixumuvjfxdjo<br>
        <strong>üîó URL:</strong> https://rnxhkjvcixumuvjfxdjo.supabase.co<br>
        <strong>üìä Table:</strong> products
    </div>

    <div class="step">
        <h3>√âtape 1: Acc√©der √† l'interface Supabase</h3>
        <p>Cliquez sur le bouton ci-dessous pour ouvrir directement l'√©diteur SQL de votre projet Supabase :</p>
        <a href="https://app.supabase.com/project/rnxhkjvcixumuvjfxdjo/sql/new" class="button" target="_blank">
            üöÄ Ouvrir l'√©diteur SQL Supabase
        </a>
    </div>

    <div class="step">
        <h3>√âtape 2: Copiez la requ√™te SQL</h3>
        <p>Copiez cette requ√™te SQL dans l'√©diteur :</p>
        <div class="sql-box" id="sqlQuery">
-- Ajouter la colonne "numero" √† la table products
-- Cette colonne sera de type INTEGER, NOT NULL avec une valeur par d√©faut de 0

ALTER TABLE products
ADD COLUMN numero INTEGER NOT NULL DEFAULT 0;

-- Commentaire pour expliquer la colonne
COMMENT ON COLUMN products.numero IS 'Num√©ro de r√©f√©rence du produit';</div>
        <button class="button" onclick="copySql()">üìã Copier la requ√™te SQL</button>
    </div>

    <div class="step">
        <h3>√âtape 3: Ex√©cuter la requ√™te</h3>
        <p>Dans l'√©diteur SQL Supabase :</p>
        <ol>
            <li>Collez la requ√™te SQL copi√©e</li>
            <li>Cliquez sur le bouton <strong>"Run"</strong> ou utilisez <code>Ctrl+Enter</code></li>
            <li>V√©rifiez que la requ√™te s'ex√©cute sans erreur</li>
        </ol>
    </div>

    <div class="step">
        <h3>√âtape 4: V√©rification (Optionnel)</h3>
        <p>Pour v√©rifier que la colonne a √©t√© ajout√©e, vous pouvez ex√©cuter cette requ√™te :</p>
        <div class="sql-box" id="verifyQuery">
SELECT column_name, data_type, is_nullable, column_default
FROM information_schema.columns
WHERE table_name = 'products'
AND column_name = 'numero';</div>
        <button class="button" onclick="copyVerify()">üìã Copier la requ√™te de v√©rification</button>
    </div>

    <div class="success">
        <strong>‚úÖ Apr√®s l'ex√©cution r√©ussie :</strong><br>
        La table <code>products</code> aura une nouvelle colonne <code>numero</code> de type <code>INTEGER</code>,
        <code>NOT NULL</code> avec une valeur par d√©faut de <code>0</code>.
    </div>

    <div class="step">
        <h3>√âtape 5: Mise √† jour des types TypeScript</h3>
        <p>Apr√®s avoir ajout√© la colonne, vous devrez mettre √† jour le fichier <code>types/supabase.ts</code>
        pour inclure la nouvelle colonne dans l'interface TypeScript de la table products :</p>
        <div class="sql-box">
// Dans la section Row de products:
numero: number

// Dans la section Insert de products:
numero?: number

// Dans la section Update de products:
numero?: number</div>
    </div>

    <script>
        function copySql() {
            const sqlText = document.getElementById('sqlQuery').textContent;
            navigator.clipboard.writeText(sqlText).then(() => {
                alert('‚úÖ Requ√™te SQL copi√©e dans le presse-papiers !');
            }).catch(() => {
                alert('‚ùå Erreur lors de la copie. Veuillez copier manuellement.');
            });
        }

        function copyVerify() {
            const verifyText = document.getElementById('verifyQuery').textContent;
            navigator.clipboard.writeText(verifyText).then(() => {
                alert('‚úÖ Requ√™te de v√©rification copi√©e dans le presse-papiers !');
            }).catch(() => {
                alert('‚ùå Erreur lors de la copie. Veuillez copier manuellement.');
            });
        }
    </script>
</body>
</html>